<div class="group relative overflow-hidden rounded-2xl border border-gray-100 bg-white shadow-sm transition-all duration-300 hover:shadow-xl">
  <div class="flex flex-col gap-4 p-4 sm:flex-row sm:gap-6 sm:p-6">
    <!-- Product Image -->
    <div class="relative mx-auto shrink-0 sm:mx-0">
      <div class="relative h-48 w-full overflow-hidden rounded-xl bg-gray-50 transition-transform duration-300 group-hover:scale-105 sm:h-32 sm:w-32 md:h-40 md:w-40">
        <img [src]="item().pictureUrl" 
             [alt]="item().productName" 
             class="size-full object-cover" />
      </div>
      <!-- Remove Button - Mobile Top Right -->
      <button mat-icon-button 
              (click)="removeItem()" 
              class="absolute! -right-2 -top-2 size-10! bg-white! shadow-lg! sm:hidden">
        <mat-icon class="text-xl! text-red-500!">close</mat-icon>
      </button>
    </div>

    <!-- Product Details -->
    <div class="flex min-w-0 flex-1 flex-col gap-3">
      <!-- Header -->
      <div class="flex items-start justify-between gap-3">
        <div class="flex-1 min-w-0">
          <h3 class="cursor-pointer truncate text-lg font-bold text-gray-900 transition-colors group-hover:text-blue-600 sm:text-xl"
              (click)="goToProduct()">
            {{ item().productName }}
          </h3>
          <div class="mt-1.5 flex items-center gap-2">
            <span class="inline-flex items-center rounded-full border border-blue-200 bg-blue-50 px-2.5 py-0.5 text-xs font-semibold text-blue-700">
              {{ item().brand }}
            </span>
            <span class="inline-flex items-center rounded-full border border-gray-200 bg-gray-50 px-2.5 py-0.5 text-xs font-semibold text-gray-700">
              {{ item().type }}
            </span>
          </div>
        </div>
        <!-- Remove Button - Desktop -->
        <button mat-icon-button 
                (click)="removeItem()" 
                class="-mr-2! -mt-1! hidden text-gray-400! transition-colors! hover:text-red-500! sm:flex">
          <mat-icon>delete_outline</mat-icon>
        </button>
      </div>

      <!-- Price -->
      <div class="flex items-baseline gap-2">
        <span class="text-2xl font-bold text-gray-900 sm:text-3xl">
          {{ item().price | currency }}
        </span>
        <span class="text-sm text-gray-500">per item</span>
      </div>

      <!-- Quantity & Subtotal -->
      <div class="mt-auto flex flex-col items-stretch justify-between gap-4 border-t border-gray-100 pt-3 sm:flex-row sm:items-center">
        <!-- Quantity Controls -->
        <div class="flex items-center gap-3">
          <span class="hidden text-sm font-medium text-gray-600 sm:inline">Quantity:</span>
          <div class="flex items-center gap-1 rounded-lg border border-gray-200 bg-gray-50 p-1">
            <button mat-icon-button 
                    (click)="decrementQuantity()" 
                    class="flex! size-9! min-h-9! min-w-9! items-center! justify-center! rounded-md! bg-transparent! transition-colors! hover:bg-white!">
              <mat-icon class="flex! items-center! justify-center! text-lg! text-gray-700!">remove</mat-icon>
            </button>
            <span class="min-w-12 select-none px-4 py-2 text-center text-base font-bold text-gray-900">
              {{ item().quantity }}
            </span>
            <button mat-icon-button 
                    (click)="incrementQuantity()" 
                    class="flex! size-9! min-h-9! min-w-9! items-center! justify-center! rounded-md! bg-transparent! transition-colors! hover:bg-white!">
              <mat-icon class="flex! items-center! justify-center! text-lg! text-gray-700!">add</mat-icon>
            </button>
          </div>
        </div>

        <!-- Subtotal -->
        <div class="flex items-center justify-between gap-2 rounded-lg border border-blue-100 bg-gradient-to-r from-blue-50 to-indigo-50 px-4 py-3 sm:justify-end">
          <span class="text-sm font-medium text-gray-600">Subtotal:</span>
          <span class="text-xl font-bold text-blue-600 sm:text-2xl">
            {{ item().price * item().quantity | currency }}
          </span>
        </div>
      </div>
    </div>
  </div>

  <!-- Hover Effect Border -->
  <div class="pointer-events-none absolute inset-0 rounded-2xl border-2 border-blue-400 opacity-0 transition-opacity duration-300 group-hover:opacity-100"></div>
</div>
