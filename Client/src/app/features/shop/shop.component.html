<div class="flex flex-col gap-3">
  <div class="flex justify-between items-center gap-4">
    <mat-form-field appearance="outline" class="flex-1 mt-4">
      <mat-label>Search products</mat-label>
      <input
        matInput
        [(ngModel)]="searchTerm"
        (input)="onSearch()"
        placeholder="Search by name..."
      />
      <mat-icon matSuffix class="cursor-pointer">search</mat-icon>
    </mat-form-field>

    <div class="flex gap-3">
      <button mat-stroked-button (click)="openFiltersDialog()" class="h-14!">
        <mat-icon>filter_list</mat-icon>
        Filters
      </button>

      <button mat-stroked-button [matMenuTriggerFor]="sortMenu" class="h-14!">
        <mat-icon>swap_vert</mat-icon>
        Sort
      </button>
      <mat-menu #sortMenu="matMenu">
        @for (option of sortOptions; track option.value) {
          <button mat-menu-item (click)="onSortChange(option.value)">
            {{ option.name }}
          </button>
        }
      </mat-menu>
    </div>
  </div>

  @if (products() && products()!.count > 0) {
    <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4">
      @for (product of allProducts(); track product.id) {
        <app-product-items [product]="product"></app-product-items>
      }
    </div>

    @if (loading()) {
      <div class="flex justify-center w-full mt-4">
        <mat-spinner diameter="40"></mat-spinner>
      </div>
    }
  } @else if (products() && products()!.count === 0) {
    <div class="flex flex-col items-center justify-center py-16 px-4">
      <h2 class="text-2xl font-bold text-gray-900 mb-2">No Products Found</h2>
      <p class="text-gray-600 text-center max-w-md mb-6">
        We couldn't find any products matching your search criteria. Try adjusting your filters or search terms.
      </p>
    </div>
  }
</div>
