import{a as z,e as L,f as G}from"./chunk-B3RXPVQC.js";import{e as H,h as J}from"./chunk-SPZOPOMF.js";import{b as U}from"./chunk-CY7CT3JX.js";import{a as B}from"./chunk-JZRGLHVY.js";import{J as R,K as O}from"./chunk-HISRE5DY.js";import{a as A}from"./chunk-ECJHEDIV.js";import{i as F,j}from"./chunk-74Z4WQG3.js";import{Ab as c,Bb as i,Cb as r,Db as v,Ib as Q,Mb as y,Ob as u,Qa as k,Ta as o,Z as f,ac as a,bc as b,ca as p,cc as m,da as x,gb as E,hc as h,lc as V,mc as N,pa as _,vb as D,wb as P}from"./chunk-MW44NC5E.js";function W(s,n){if(s&1){let t=Q();i(0,"div",0)(1,"div",1)(2,"div",2),v(3,"img",3),r(),i(4,"div",4)(5,"div")(6,"h1",5),a(7),r(),i(8,"p",6),a(9),V(10,"currency"),r()(),v(11,"mat-divider"),i(12,"div",7)(13,"div",8)(14,"label",9),a(15,"Quantity:"),r(),i(16,"div",10)(17,"button",11),y("click",function(){p(t);let d=u();return x(d.decrementQuantity())}),i(18,"mat-icon",12),a(19,"remove"),r()(),i(20,"input",13),y("input",function(d){p(t);let g=u();return x(g.updateQuantity(d.target.value))}),r(),i(21,"button",11),y("click",function(){p(t);let d=u();return x(d.incrementQuantity())}),i(22,"mat-icon",12),a(23,"add"),r()()(),i(24,"span",14),a(25),r()(),i(26,"button",15),y("click",function(){p(t);let d=u();return x(d.addToCart())}),i(27,"mat-icon",16),a(28),r(),a(29),r()(),v(30,"mat-divider"),i(31,"div")(32,"h2",17),a(33,"Description"),r(),i(34,"p",18),a(35),r()(),i(36,"div",19)(37,"div")(38,"p",14),a(39,"Brand"),r(),i(40,"p",20),a(41),r()(),i(42,"div")(43,"p",14),a(44,"Type"),r(),i(45,"p",20),a(46),r()()()()()()}if(s&2){let t,l,d,g,C,S,I,q,w,M,T,e=u();o(3),c("src",h((t=e.product())==null?null:t.pictureUrl),k)("alt",h((l=e.product())==null?null:l.name)),o(4),m(" ",(d=e.product())==null?null:d.name," "),o(2),m(" ",N(10,17,(g=e.product())==null?null:g.price)," "),o(8),c("disabled",e.quantity()<=1),o(3),c("max",(C=e.product())==null?null:C.quantityInStock)("value",e.quantity()),o(),c("disabled",e.quantity()>=(((S=e.product())==null?null:S.quantityInStock)||0)),o(4),m(" ",(I=e.product())==null?null:I.quantityInStock," available "),o(),c("disabled",e.addingToCart()||e.quantity()<1||e.quantity()>(((q=e.product())==null?null:q.quantityInStock)||0)),o(2),b(e.addingToCart()?"hourglass_empty":"shopping_cart"),o(),m(" ",e.addingToCart()?"Adding...":"Add To Cart"," "),o(6),m(" ",(w=e.product())==null?null:w.description," "),o(6),b((M=e.product())==null?null:M.brand),o(5),b((T=e.product())==null?null:T.type)}}var K=class s{shopService=f(z);cartService=f(U);activatedRoute=f(A);product=_(null);quantity=_(1);addingToCart=_(!1);ngOnInit(){this.loadProduct()}loadProduct(){let n=this.activatedRoute.snapshot.paramMap.get("id");n&&this.shopService.getProduct(+n).subscribe({next:t=>{this.product.set(t)},error:t=>{console.error("Error fetching product details:",t)}})}setInitialQuantityFromCart(n){let t=this.cartService.cart();if(t){let l=t.items.find(d=>d.productId===n);l?this.quantity.set(l.quantity):this.quantity.set(1)}else this.quantity.set(1)}incrementQuantity(){let n=this.quantity(),t=this.product()?.quantityInStock||0;n<t&&this.quantity.set(n+1)}decrementQuantity(){let n=this.quantity();n>1&&this.quantity.set(n-1)}updateQuantity(n){let t=parseInt(n,10),l=this.product()?.quantityInStock||0;!isNaN(t)&&t>=1?this.quantity.set(Math.min(t,l)):this.quantity.set(1)}async addToCart(){let n=this.product();if(n){this.addingToCart.set(!0);try{await this.cartService.addItemToCart(n,this.quantity()),console.log("Added to cart successfully")}catch(t){console.error("Failed to add to cart:",t)}finally{this.addingToCart.set(!1)}}}static \u0275fac=function(t){return new(t||s)};static \u0275cmp=E({type:s,selectors:[["app-product-details"]],decls:1,vars:1,consts:[[1,"container","mx-auto","px-4","py-6","md:py-12","max-w-7xl"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6","md:gap-12"],[1,"flex","items-start","justify-center"],[1,"w-full","max-w-lg","rounded-2xl","shadow-lg","object-cover","aspect-square",3,"src","alt"],[1,"flex","flex-col","gap-6"],[1,"text-3xl","md:text-4xl","font-bold","text-gray-900","mb-3"],[1,"text-4xl","md:text-5xl","font-bold","text-primary","mb-6"],[1,"flex","flex-col","gap-4"],[1,"flex","items-center","gap-4"],[1,"text-sm","font-medium","text-gray-600"],[1,"flex","items-center","gap-1","rounded-lg","border","border-gray-200","bg-gray-50","p-1"],["mat-icon-button","",1,"flex!","size-9!","min-h-9!","min-w-9!","items-center!","justify-center!","rounded-md!","bg-transparent!","transition-colors!","hover:bg-white!","disabled:opacity-40!",3,"click","disabled"],[1,"flex!","items-center!","justify-center!","text-lg!","text-gray-700!"],["matInput","","type","number","min","1",1,"w-16","border-none","bg-transparent","px-2","py-1","text-center","text-base","font-bold","text-gray-900","outline-none",3,"input","max","value"],[1,"text-sm","text-gray-500"],["mat-raised-button","",1,"h-14!","w-full!","bg-blue-600!","text-lg!","font-bold!","text-white!","hover:bg-blue-700!","disabled:bg-gray-300!",3,"click","disabled"],[1,"mr-2"],[1,"text-xl","font-semibold","text-gray-900","mb-3"],[1,"text-base","leading-relaxed","text-gray-600"],[1,"grid","grid-cols-2","gap-4","mt-4","p-4","bg-gray-50","rounded-lg"],[1,"font-semibold","text-gray-900"]],template:function(t,l){t&1&&D(0,W,47,19,"div",0),t&2&&P(l.product()?0:-1)},dependencies:[L,j,B,G,O,R,J,H,F],encapsulation:2})};export{K as ProductDetailsComponent};
