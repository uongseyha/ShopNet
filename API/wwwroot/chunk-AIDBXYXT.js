import{b as W,c as Y,d as L,e as U,g as H,h as G}from"./chunk-SPZOPOMF.js";import{b as k}from"./chunk-CY7CT3JX.js";import{a as V}from"./chunk-JZRGLHVY.js";import{J as O,K as P}from"./chunk-HISRE5DY.js";import{c as T}from"./chunk-ECJHEDIV.js";import{i as E}from"./chunk-74Z4WQG3.js";import{Ab as C,Bb as e,Cb as t,Db as S,Ib as w,Mb as d,Ob as c,Qa as B,Ta as a,Z as _,ac as n,bc as f,ca as p,cc as u,da as s,dc as q,ec as R,fc as z,gb as y,gc as Q,lc as x,mc as g,pa as N,tc as I,uc as b,vb as v,wb as h,yb as F,zb as A}from"./chunk-MW44NC5E.js";var D=class r{item=b.required();cartService=_(k);router=_(T);incrementQuantity(){this.cartService.addItemToCart(this.item(),1)}decrementQuantity(){this.cartService.removeItemFromCart(this.item().productId,1)}removeItem(){this.cartService.removeItemFromCart(this.item().productId,this.item().quantity)}goToProduct(){this.router.navigate(["/shop",this.item().productId])}static \u0275fac=function(i){return new(i||r)};static \u0275cmp=y({type:r,selectors:[["app-cart-item"]],inputs:{item:[1,"item"]},decls:47,vars:12,consts:[[1,"group","relative","overflow-hidden","rounded-2xl","border","border-gray-100","bg-white","shadow-sm","transition-all","duration-300","hover:shadow-xl"],[1,"flex","flex-col","gap-4","p-4","sm:flex-row","sm:gap-6","sm:p-6"],[1,"relative","mx-auto","shrink-0","sm:mx-0"],[1,"relative","h-48","w-full","overflow-hidden","rounded-xl","bg-gray-50","transition-transform","duration-300","group-hover:scale-105","sm:h-32","sm:w-32","md:h-40","md:w-40"],[1,"size-full","object-cover",3,"src","alt"],["mat-icon-button","",1,"absolute!","-right-2","-top-2","size-10!","bg-white!","shadow-lg!","sm:hidden",3,"click"],[1,"text-xl!","text-red-500!"],[1,"flex","min-w-0","flex-1","flex-col","gap-3"],[1,"flex","items-start","justify-between","gap-3"],[1,"flex-1","min-w-0"],[1,"cursor-pointer","truncate","text-lg","font-bold","text-gray-900","transition-colors","group-hover:text-blue-600","sm:text-xl",3,"click"],[1,"mt-1.5","flex","items-center","gap-2"],[1,"inline-flex","items-center","rounded-full","border","border-blue-200","bg-blue-50","px-2.5","py-0.5","text-xs","font-semibold","text-blue-700"],[1,"inline-flex","items-center","rounded-full","border","border-gray-200","bg-gray-50","px-2.5","py-0.5","text-xs","font-semibold","text-gray-700"],["mat-icon-button","",1,"-mr-2!","-mt-1!","hidden","text-gray-400!","transition-colors!","hover:text-red-500!","sm:flex",3,"click"],[1,"flex","items-baseline","gap-2"],[1,"text-2xl","font-bold","text-gray-900","sm:text-3xl"],[1,"text-sm","text-gray-500"],[1,"mt-auto","flex","flex-col","items-stretch","justify-between","gap-4","border-t","border-gray-100","pt-3","sm:flex-row","sm:items-center"],[1,"flex","items-center","gap-3"],[1,"hidden","text-sm","font-medium","text-gray-600","sm:inline"],[1,"flex","items-center","gap-1","rounded-lg","border","border-gray-200","bg-gray-50","p-1"],["mat-icon-button","",1,"flex!","size-9!","min-h-9!","min-w-9!","items-center!","justify-center!","rounded-md!","bg-transparent!","transition-colors!","hover:bg-white!",3,"click"],[1,"flex!","items-center!","justify-center!","text-lg!","text-gray-700!"],[1,"min-w-12","select-none","px-4","py-2","text-center","text-base","font-bold","text-gray-900"],[1,"flex","items-center","justify-between","gap-2","rounded-lg","border","border-blue-100","bg-gradient-to-r","from-blue-50","to-indigo-50","px-4","py-3","sm:justify-end"],[1,"text-sm","font-medium","text-gray-600"],[1,"text-xl","font-bold","text-blue-600","sm:text-2xl"],[1,"pointer-events-none","absolute","inset-0","rounded-2xl","border-2","border-blue-400","opacity-0","transition-opacity","duration-300","group-hover:opacity-100"]],template:function(i,o){i&1&&(e(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),S(4,"img",4),t(),e(5,"button",5),d("click",function(){return o.removeItem()}),e(6,"mat-icon",6),n(7,"close"),t()()(),e(8,"div",7)(9,"div",8)(10,"div",9)(11,"h3",10),d("click",function(){return o.goToProduct()}),n(12),t(),e(13,"div",11)(14,"span",12),n(15),t(),e(16,"span",13),n(17),t()()(),e(18,"button",14),d("click",function(){return o.removeItem()}),e(19,"mat-icon"),n(20,"delete_outline"),t()()(),e(21,"div",15)(22,"span",16),n(23),x(24,"currency"),t(),e(25,"span",17),n(26,"per item"),t()(),e(27,"div",18)(28,"div",19)(29,"span",20),n(30,"Quantity:"),t(),e(31,"div",21)(32,"button",22),d("click",function(){return o.decrementQuantity()}),e(33,"mat-icon",23),n(34,"remove"),t()(),e(35,"span",24),n(36),t(),e(37,"button",22),d("click",function(){return o.incrementQuantity()}),e(38,"mat-icon",23),n(39,"add"),t()()()(),e(40,"div",25)(41,"span",26),n(42,"Subtotal:"),t(),e(43,"span",27),n(44),x(45,"currency"),t()()()()(),S(46,"div",28),t()),i&2&&(a(4),C("src",o.item().pictureUrl,B)("alt",o.item().productName),a(8),u(" ",o.item().productName," "),a(3),u(" ",o.item().brand," "),a(2),u(" ",o.item().type," "),a(6),u(" ",g(24,8,o.item().price)," "),a(13),u(" ",o.item().quantity," "),a(8),u(" ",g(45,10,o.item().price*o.item().quantity)," "))},dependencies:[O,V,E],styles:["[_nghost-%COMP%]{display:block;margin-bottom:1rem}.group[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{transform:scale(1.05)}button[mat-icon-button][_ngcontent-%COMP%]{display:flex!important;align-items:center!important;justify-content:center!important;position:relative;overflow:hidden}button[mat-icon-button][_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{display:flex!important;align-items:center!important;justify-content:center!important;margin:0!important}button[mat-icon-button][_ngcontent-%COMP%]:hover:not(:disabled){background-color:#fff!important}button[mat-icon-button][_ngcontent-%COMP%]:active:not(:disabled){background-color:#e5e7eb80!important}@media(max-width:640px){[_ngcontent-%COMP%]::-webkit-scrollbar{width:4px;height:4px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#888;border-radius:2px}}"]})};function Z(r,l){if(r&1&&(e(0,"div",8)(1,"span",18),n(2,"Discount"),t(),e(3,"span",19),n(4),x(5,"currency"),t()()),r&2){let i=c();a(4),u("-",g(5,1,i.discount()))}}function $(r,l){if(r&1&&(e(0,"span",9),n(1),x(2,"currency"),t()),r&2){let i=c();a(),f(g(2,1,i.shipping()))}}function ee(r,l){r&1&&(e(0,"span",10),n(1,"FREE"),t())}function te(r,l){if(r&1){let i=w();e(0,"div",15)(1,"div",20)(2,"mat-icon",21),n(3,"local_offer"),t(),e(4,"div",22)(5,"span",23),n(6,"Voucher Applied"),t(),e(7,"span",24),n(8),t()()(),e(9,"button",25),d("click",function(){p(i);let m=c();return s(m.onRemoveVoucher())}),e(10,"mat-icon",26),n(11,"close"),t()()()}if(r&2){let i=c();a(8),f(i.appliedVoucher())}}function ie(r,l){if(r&1){let i=w();e(0,"div",16)(1,"label",27),n(2,"Have a voucher code?"),t(),e(3,"div",28)(4,"mat-form-field",29)(5,"input",30),Q("ngModelChange",function(m){p(i);let M=c();return z(M.voucherCode,m)||(M.voucherCode=m),s(m)}),d("keyup.enter",function(){p(i);let m=c();return s(m.onApplyVoucher())}),t()(),e(6,"button",31),d("click",function(){p(i);let m=c();return s(m.onApplyVoucher())}),n(7," Apply "),t()()()}if(r&2){let i=c();a(5),R("ngModel",i.voucherCode),a(),C("disabled",!i.voucherCode().trim())}}var j=class r{cartService=_(k);itemCount=b.required();subtotal=b.required();discount=b(0);shipping=b(0);total=b.required();appliedVoucher=b(null);voucherCode=N("");checkout=I();continueShopping=I();applyVoucher=I();removeVoucher=I();onApplyVoucher(){this.voucherCode().trim()&&this.applyVoucher.emit(this.voucherCode())}onRemoveVoucher(){this.voucherCode.set(""),this.removeVoucher.emit()}static \u0275fac=function(i){return new(i||r)};static \u0275cmp=y({type:r,selectors:[["app-order-summary"]],inputs:{itemCount:[1,"itemCount"],subtotal:[1,"subtotal"],discount:[1,"discount"],shipping:[1,"shipping"],total:[1,"total"],appliedVoucher:[1,"appliedVoucher"]},outputs:{checkout:"checkout",continueShopping:"continueShopping",applyVoucher:"applyVoucher",removeVoucher:"removeVoucher"},decls:34,vars:10,consts:[[1,"bg-white","rounded-2xl","shadow-lg","p-6","lg:p-8","border","border-gray-100","lg:sticky","lg:top-24","space-y-6"],[1,"pb-4","border-b","border-gray-200"],[1,"text-2xl","font-bold","text-gray-900"],[1,"space-y-4"],[1,"flex","justify-between","items-center","py-3","border-b","border-gray-100"],[1,"text-gray-600","font-medium"],[1,"flex","items-center","gap-2"],[1,"text-xl","font-semibold","text-gray-900"],[1,"flex","justify-between","items-center","py-3","border-b","border-gray-100","text-green-600"],[1,"text-lg","font-semibold","text-gray-900"],[1,"text-sm","text-green-600","font-semibold"],[1,"flex","justify-between","items-center","py-4","bg-gradient-to-r","from-blue-50","to-indigo-50","rounded-xl","px-4","border","border-blue-100"],[1,"text-lg","font-bold","text-gray-900"],[1,"text-3xl","font-bold","text-blue-600"],[1,"py-4","border-t","border-gray-100"],[1,"flex","items-center","justify-between","gap-2","p-3","bg-green-50","rounded-lg","border","border-green-200"],[1,"space-y-2"],["mat-button","",1,"w-full!","text-blue-600!","hover:bg-blue-50!","rounded-lg!","transition-colors!",3,"click"],[1,"font-medium"],[1,"text-lg","font-semibold"],[1,"flex","items-center","gap-2","flex-1"],[1,"text-green-600!","text-xl!"],[1,"flex","flex-col"],[1,"text-xs","text-gray-600"],[1,"font-semibold","text-green-700"],["mat-icon-button","",1,"w-8!","h-8!","text-red-600!",3,"click"],[1,"text-base!"],[1,"text-sm","font-medium","text-gray-600"],[1,"flex","gap-2"],["appearance","outline",1,"flex-1!"],["matInput","","placeholder","Enter code",1,"text-sm!","ml-1",3,"ngModelChange","keyup.enter","ngModel"],["mat-raised-button","","color","primary",1,"h-14!","px-6!","text-sm!","font-semibold!","whitespace-nowrap!",3,"click","disabled"]],template:function(i,o){i&1&&(e(0,"div",0)(1,"div",1)(2,"h2",2),n(3,"Order Summary"),t()(),e(4,"div",3)(5,"div",4)(6,"span",5),n(7,"Total Items"),t(),e(8,"div",6)(9,"span",2),n(10),t()()(),e(11,"div",4)(12,"span",5),n(13,"Subtotal"),t(),e(14,"span",7),n(15),x(16,"currency"),t()(),v(17,Z,6,3,"div",8),e(18,"div",4)(19,"span",5),n(20,"Shipping"),t(),v(21,$,3,3,"span",9)(22,ee,2,0,"span",10),t(),e(23,"div",11)(24,"span",12),n(25,"Total"),t(),e(26,"span",13),n(27),x(28,"currency"),t()()(),e(29,"div",14),v(30,te,12,1,"div",15)(31,ie,8,2,"div",16),t(),e(32,"button",17),d("click",function(){return o.continueShopping.emit()}),n(33," Continue Shopping "),t()()),i&2&&(a(10),f(o.itemCount()),a(5),f(g(16,6,o.subtotal())),a(2),h(o.discount()>0?17:-1),a(4),h(o.shipping()>0?21:22),a(6),f(g(28,8,o.total())),a(3),h(o.appliedVoucher()?30:31))},dependencies:[P,O,V,H,G,U,W,Y,L,E],styles:[".mat-mdc-form-field{width:100%}  .mat-mdc-text-field-wrapper{padding:0!important}  .mat-mdc-form-field-flex{height:56px!important}  .mat-mdc-form-field-infix{padding-top:16px!important;padding-bottom:8px!important;min-height:40px!important}.voucher-input[_ngcontent-%COMP%]{transition:all .3s ease}.voucher-input[_ngcontent-%COMP%]:focus-within{transform:translateY(-2px)}"]})};var ne=(r,l)=>l.productId;function oe(r,l){if(r&1&&(e(0,"span",6),n(1),x(2,"currency"),t()),r&2){let i=c(2);a(),u("\u2022 ",g(2,1,i.cartService.totals().total))}}function re(r,l){if(r&1&&S(0,"app-cart-item",17),r&2){let i=l.$implicit;C("item",i)}}function ae(r,l){r&1&&(e(0,"div",18)(1,"div",20)(2,"div",21)(3,"mat-icon",22),n(4,"shopping_cart"),t()(),e(5,"div")(6,"h3",23),n(7,"Your cart is empty"),t(),e(8,"p",24),n(9,"Add some items to get started"),t()()()())}function le(r,l){if(r&1){let i=w();e(0,"div",19)(1,"app-order-summary",25),d("checkout",function(){p(i);let m=c(2);return s(m.onCheckout())})("continueShopping",function(){p(i);let m=c(2);return s(m.goToShop())})("applyVoucher",function(m){p(i);let M=c(2);return s(M.onApplyVoucher(m))})("removeVoucher",function(){p(i);let m=c(2);return s(m.onRemoveVoucher())}),t()()}if(r&2){let i=c(2);a(),C("itemCount",i.cartService.itemCount())("subtotal",i.cartService.totals().subtotal)("discount",i.cartService.totals().discount)("shipping",i.cartService.totals().shipping)("total",i.cartService.totals().total)("appliedVoucher",i.getAppliedVoucher())}}function me(r,l){if(r&1&&(e(0,"div",3)(1,"h1",4),n(2," Shopping Cart "),t(),e(3,"p",5),n(4),v(5,oe,3,3,"span",6),t()(),e(6,"div",7)(7,"div",8)(8,"div",9)(9,"div",10)(10,"div",11)(11,"div",12)(12,"span",13),n(13,"Items"),t(),e(14,"strong",14),n(15),t()(),S(16,"div",15),e(17,"div",12)(18,"span",13),n(19,"Total"),t(),e(20,"strong",16),n(21),x(22,"currency"),t()()()()(),F(23,re,1,1,"app-cart-item",17,ne,!1,ae,10,0,"div",18),t(),v(26,le,2,6,"div",19),t()),r&2){let i,o=c();a(4),q(" ",o.cartService.itemCount()," ",o.cartService.itemCount()===1?"item":"items"," in your cart "),a(),h(o.cartService.totals()?5:-1),a(10),f(o.cartService.itemCount()),a(6),f(g(22,7,(i=o.cartService.totals())==null?null:i.total)),a(2),A(o.cartService.cart().items),a(3),h(o.cartService.cart().items.length>0&&o.cartService.totals()?26:-1)}}function ce(r,l){if(r&1){let i=w();e(0,"div",2)(1,"div",26)(2,"div",27)(3,"mat-icon",28),n(4,"shopping_cart"),t()(),e(5,"h2",29),n(6,"Your cart is empty"),t(),e(7,"p",30),n(8,"Discover amazing products and start shopping!"),t(),e(9,"button",31),d("click",function(){p(i);let m=c();return s(m.goToShop())}),n(10," Start Shopping "),t()()()}}var X=class r{cartService=_(k);router=_(T);getAppliedVoucher(){return this.cartService.cart()?.coupon?.promotionCode||null}goToShop(){this.router.navigate(["/shop"])}onCheckout(){this.router.navigate(["/checkout"])}async onApplyVoucher(l){try{let i=await this.cartService.applyDiscount(l).toPromise();if(i){let o=this.cartService.cart();o&&(o.coupon=i,await this.cartService.setCart(o).toPromise(),console.log("Voucher applied successfully"))}}catch(i){console.error("Failed to apply voucher:",i)}}async onRemoveVoucher(){let l=this.cartService.cart();l&&(l.coupon=void 0,await this.cartService.setCart(l).toPromise(),console.log("Voucher removed"))}static \u0275fac=function(i){return new(i||r)};static \u0275cmp=y({type:r,selectors:[["app-cart"]],decls:4,vars:1,consts:[[1,"min-h-screen","bg-gradient-to-br","from-gray-50","via-blue-50/30","to-gray-50"],[1,"max-w-7xl","mx-auto","px-4","sm:px-6","lg:px-8","py-6","sm:py-8","lg:py-12"],[1,"flex","items-center","justify-center","min-h-[60vh]"],[1,"mb-8"],[1,"text-3xl","sm:text-4xl","lg:text-5xl","font-bold","text-gray-900","mb-2"],[1,"text-gray-600","text-sm","sm:text-base"],[1,"ml-2","text-blue-600","font-semibold"],[1,"grid","grid-cols-1","lg:grid-cols-3","gap-6","lg:gap-8"],[1,"lg:col-span-2","space-y-4"],[1,"lg:hidden","bg-white","rounded-2xl","shadow-sm","p-4","border","border-gray-100","mb-6"],[1,"flex","items-center","justify-between"],[1,"flex","items-center","gap-4"],[1,"flex","flex-col"],[1,"text-xs","text-gray-500","uppercase","tracking-wide"],[1,"text-2xl","font-bold","text-gray-900"],[1,"h-12","w-px","bg-gray-200"],[1,"text-2xl","font-bold","text-blue-600"],[3,"item"],[1,"text-center","py-16","bg-white","rounded-2xl","shadow-sm","border","border-gray-100"],[1,"lg:col-span-1"],[1,"flex","flex-col","items-center","gap-4"],[1,"w-24","h-24","rounded-full","bg-gray-100","flex","items-center","justify-center"],[1,"text-5xl!","w-12!","h-12!","text-gray-400"],[1,"text-xl","font-semibold","text-gray-700","mb-1"],[1,"text-gray-500"],[3,"checkout","continueShopping","applyVoucher","removeVoucher","itemCount","subtotal","discount","shipping","total","appliedVoucher"],[1,"text-center","bg-white","rounded-3xl","shadow-xl","p-12","max-w-md","border","border-gray-100"],[1,"w-32","h-32","mx-auto","mb-6","rounded-full","bg-gradient-to-br","from-blue-100","to-indigo-100","flex","items-center","justify-center"],[1,"text-7xl!","w-16!","h-16!","text-blue-600"],[1,"text-3xl","font-bold","text-gray-900","mb-3"],[1,"text-gray-600","text-lg","mb-8"],["mat-raised-button","","color","primary",1,"px-8!","py-3!","text-base!","rounded-xl!",3,"click"]],template:function(i,o){i&1&&(e(0,"div",0)(1,"div",1),v(2,me,27,9)(3,ce,11,0,"div",2),t()()),i&2&&(a(2),h(o.cartService.cart()?2:3))},dependencies:[D,j,P,V,E],encapsulation:2})};export{X as CartComponent};
